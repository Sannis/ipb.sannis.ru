diff --git a/admin/index.php b/admin/index.php
index 7801c7c..7b0de60 100644
--- a/admin/index.php
+++ b/admin/index.php
@@ -407,4 +407,4 @@ function skin_emergency()
 }
 
 
-?>
\ No newline at end of file
+?>
diff --git a/cache/lang_cache/en/lang_topic.php b/cache/lang_cache/en/lang_topic.php
index da75fc2..857300a 100644
--- a/cache/lang_cache/en/lang_topic.php
+++ b/cache/lang_cache/en/lang_topic.php
@@ -2,6 +2,8 @@
 
 $lang = array (
 
+'ajax_quick_quote'		=> "Quick quote",
+
 'rating_prefix'			=> "Rating",
 'group_icon'			=> "Group Icon",
 
@@ -198,4 +200,4 @@ $lang = array (
 'forward'					=> "Email this topic",
 'back_top'              	=> "Back to top",
 );
-?>
\ No newline at end of file
+?>
diff --git a/cache/lang_cache/ru/lang_topic.php b/cache/lang_cache/ru/lang_topic.php
index 71aeb27..8fb7297 100644
--- a/cache/lang_cache/ru/lang_topic.php
+++ b/cache/lang_cache/ru/lang_topic.php
@@ -2,6 +2,8 @@
 
 $lang = array (
 
+'ajax_quick_quote'		=> "Быстрая цитата",
+
 'rating_prefix'			=> "Рейтинг",
 'group_icon'			=> "Иконка группы",
 
@@ -208,4 +210,4 @@ $lang = array (
 'forward'					=> "Сообщить другу",
 'back_top'                  => "Вверх",
 );
-?>
\ No newline at end of file
+?>
diff --git a/cache/skin_cache/cacheid_2/skin_boards.php b/cache/skin_cache/cacheid_2/skin_boards.php
index b59977d..24d9f37 100755
--- a/cache/skin_cache/cacheid_2/skin_boards.php
+++ b/cache/skin_cache/cacheid_2/skin_boards.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:20 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_buddy.php b/cache/skin_cache/cacheid_2/skin_buddy.php
index 31f45aa..b30b227 100755
--- a/cache/skin_cache/cacheid_2/skin_buddy.php
+++ b/cache/skin_cache/cacheid_2/skin_buddy.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:20 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_bugtracker.php b/cache/skin_cache/cacheid_2/skin_bugtracker.php
index 500e2fe..6a40c06 100755
--- a/cache/skin_cache/cacheid_2/skin_bugtracker.php
+++ b/cache/skin_cache/cacheid_2/skin_bugtracker.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:20 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_calendar.php b/cache/skin_cache/cacheid_2/skin_calendar.php
index be351d2..0cdf7dd 100755
--- a/cache/skin_cache/cacheid_2/skin_calendar.php
+++ b/cache/skin_cache/cacheid_2/skin_calendar.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:20 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_chatpara.php b/cache/skin_cache/cacheid_2/skin_chatpara.php
index b39e71a..d8876d4 100755
--- a/cache/skin_cache/cacheid_2/skin_chatpara.php
+++ b/cache/skin_cache/cacheid_2/skin_chatpara.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:20 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_chatsigma.php b/cache/skin_cache/cacheid_2/skin_chatsigma.php
index 1c282ea..3fdf8a5 100755
--- a/cache/skin_cache/cacheid_2/skin_chatsigma.php
+++ b/cache/skin_cache/cacheid_2/skin_chatsigma.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:20 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_editors.php b/cache/skin_cache/cacheid_2/skin_editors.php
index d086190..d5843f1 100755
--- a/cache/skin_cache/cacheid_2/skin_editors.php
+++ b/cache/skin_cache/cacheid_2/skin_editors.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:20 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_emails.php b/cache/skin_cache/cacheid_2/skin_emails.php
index 2aa4c81..2384b5c 100755
--- a/cache/skin_cache/cacheid_2/skin_emails.php
+++ b/cache/skin_cache/cacheid_2/skin_emails.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:20 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_forum.php b/cache/skin_cache/cacheid_2/skin_forum.php
index 0cc6131..970ed0a 100755
--- a/cache/skin_cache/cacheid_2/skin_forum.php
+++ b/cache/skin_cache/cacheid_2/skin_forum.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:20 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_global.php b/cache/skin_cache/cacheid_2/skin_global.php
index 107f8ed..36039c1 100755
--- a/cache/skin_cache/cacheid_2/skin_global.php
+++ b/cache/skin_cache/cacheid_2/skin_global.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_help.php b/cache/skin_cache/cacheid_2/skin_help.php
index afd5397..634b49d 100755
--- a/cache/skin_cache/cacheid_2/skin_help.php
+++ b/cache/skin_cache/cacheid_2/skin_help.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_legends.php b/cache/skin_cache/cacheid_2/skin_legends.php
index 4dc4f9d..793c965 100755
--- a/cache/skin_cache/cacheid_2/skin_legends.php
+++ b/cache/skin_cache/cacheid_2/skin_legends.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_login.php b/cache/skin_cache/cacheid_2/skin_login.php
index 16293a9..8af1d17 100755
--- a/cache/skin_cache/cacheid_2/skin_login.php
+++ b/cache/skin_cache/cacheid_2/skin_login.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_mlist.php b/cache/skin_cache/cacheid_2/skin_mlist.php
index 67dc658..2f697d5 100755
--- a/cache/skin_cache/cacheid_2/skin_mlist.php
+++ b/cache/skin_cache/cacheid_2/skin_mlist.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
@@ -285,7 +285,7 @@ $IPBHTML .= "<!-- SEARCH FORM -->
 	<table class='ipbtable' cellspacing=\"1\">
 	<tr>
 	" . ((is_array( $members ) and count( $members )) ? ("
-		".$this->__foreach_loop__id_4b5b50a506cdd($members,$pages,$quickjump,$checked)."
+		".$this->__foreach_loop__id_4b5da3acc2bb0($members,$pages,$quickjump,$checked)."
 		</tr>
 	") : ("
 		<tr>
@@ -306,7 +306,7 @@ return $IPBHTML;
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a506cdd($members="",$pages="",$quickjump="",$checked="")
+function __foreach_loop__id_4b5da3acc2bb0($members="",$pages="",$quickjump="",$checked="")
 {
 	$_ips___x_retval = '';
 	
diff --git a/cache/skin_cache/cacheid_2/skin_mod.php b/cache/skin_cache/cacheid_2/skin_mod.php
index f26bd41..7434ec9 100755
--- a/cache/skin_cache/cacheid_2/skin_mod.php
+++ b/cache/skin_cache/cacheid_2/skin_mod.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_msg.php b/cache/skin_cache/cacheid_2/skin_msg.php
index d74acd1..c088bf9 100755
--- a/cache/skin_cache/cacheid_2/skin_msg.php
+++ b/cache/skin_cache/cacheid_2/skin_msg.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_online.php b/cache/skin_cache/cacheid_2/skin_online.php
index c13b4ce..b661d2e 100755
--- a/cache/skin_cache/cacheid_2/skin_online.php
+++ b/cache/skin_cache/cacheid_2/skin_online.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_poll.php b/cache/skin_cache/cacheid_2/skin_poll.php
index 54a97dd..158337b 100755
--- a/cache/skin_cache/cacheid_2/skin_poll.php
+++ b/cache/skin_cache/cacheid_2/skin_poll.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_portal.php b/cache/skin_cache/cacheid_2/skin_portal.php
index 1729fda..c8fbc0d 100755
--- a/cache/skin_cache/cacheid_2/skin_portal.php
+++ b/cache/skin_cache/cacheid_2/skin_portal.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_post.php b/cache/skin_cache/cacheid_2/skin_post.php
index 7effb68..a2c5608 100755
--- a/cache/skin_cache/cacheid_2/skin_post.php
+++ b/cache/skin_cache/cacheid_2/skin_post.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_printpage.php b/cache/skin_cache/cacheid_2/skin_printpage.php
index 772e9bc..d7793b5 100755
--- a/cache/skin_cache/cacheid_2/skin_printpage.php
+++ b/cache/skin_cache/cacheid_2/skin_printpage.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_profile.php b/cache/skin_cache/cacheid_2/skin_profile.php
index be92d15..4dc17f1 100755
--- a/cache/skin_cache/cacheid_2/skin_profile.php
+++ b/cache/skin_cache/cacheid_2/skin_profile.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
@@ -130,7 +130,7 @@ $IPBHTML .= "<div class='pp-tabwrap'>
 		<form onsubmit='return pp_check_form()' action='{$this->ipsclass->base_url}act=profile&amp;CODE=friends_list_popup&amp;do=friends_list_moderation&amp;md5check={$this->ipsclass->md5_check}&amp;tab={$this->ipsclass->input['tab']}' method='POST'>
 	") : ("")) . "
 	" . ((is_array($friends) and count($friends)) ? ("
-		".$this->__foreach_loop__id_4b5b50a517ff2($friends,$pages)."
+		".$this->__foreach_loop__id_4b5da3acdd702($friends,$pages)."
 		<!-- BOTTOM MOD OPTIONS -->
 		" . (($this->ipsclass->input['tab'] == 'pending') ? ("
 			<div class='pp-header' style='text-align:right'>
@@ -195,7 +195,7 @@ return $IPBHTML;
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a517ff2($friends="",$pages="")
+function __foreach_loop__id_4b5da3acdd702($friends="",$pages="")
 {
 	$_ips___x_retval = '';
 	
@@ -347,7 +347,7 @@ $IPBHTML = "";
 $IPBHTML .= "<div id='pp-iframe-wrap' class='pp-contentbox-back' style='overflow:auto'>
 <form onsubmit='return check_form();' action='{$this->ipsclass->base_url}act=profile&amp;CODE=personal_iframe_comments_save&amp;member_id={$member['id']}&amp;md5check={$this->ipsclass->md5_check}' method='POST'>
 	" . ((is_array($comments) and count($comments)) ? ("
-		".$this->__foreach_loop__id_4b5b50a5189b7($member,$comments,$pages)."
+		".$this->__foreach_loop__id_4b5da3acde559($member,$comments,$pages)."
 		<div class='pp-contentbox-entry-noheight'>
 			<div style='float:right'>
 				" . ((( $member['id'] == $this->ipsclass->member['id'] ) OR ( $this->ipsclass->member['g_is_supmod'] )) ? ("
@@ -408,7 +408,7 @@ return $IPBHTML;
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a5189b7($member="",$comments="",$pages="")
+function __foreach_loop__id_4b5da3acde559($member="",$comments="",$pages="")
 {
 	$_ips___x_retval = '';
 	
@@ -449,7 +449,7 @@ $IPBHTML = "";
 //--starthtml--//
 $IPBHTML .= "<div id='pp-iframe-wrap' class='pp-contentbox-back' style='overflow:auto'>
 	" . ((is_array($friends) and count($friends)) ? ("
-		".$this->__foreach_loop__id_4b5b50a518d1c($member,$friends,$pages)."
+		".$this->__foreach_loop__id_4b5da3acdea49($member,$friends,$pages)."
 		" . (($pages OR ( $member['id'] == $this->ipsclass->member['id'] )) ? ("
 			<div class='pp-contentbox-entry-noheight'>
 				<div style='float:right'>
@@ -476,7 +476,7 @@ return $IPBHTML;
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a518d1c($member="",$friends="",$pages="")
+function __foreach_loop__id_4b5da3acdea49($member="",$friends="",$pages="")
 {
 	$_ips___x_retval = '';
 	
@@ -934,7 +934,7 @@ month['{$this->ipsclass->lang['M_12']}']=\"12\";
 			<!-- Custom Fields -->
 			" . ((is_array( $member['custom_fields'] ) AND count( $member['custom_fields'] )) ? ("
 				<div class='pp-header'>{$this->ipsclass->lang['m_other_info']}</div>
-				".$this->__foreach_loop__id_4b5b50a5196c1($tabs,$member,$comments,$friends,$visitors,$default_tab,$default_tab_content)."
+				".$this->__foreach_loop__id_4b5da3acdfa01($tabs,$member,$comments,$friends,$visitors,$default_tab,$default_tab_content)."
 			") : ("")) . "
 			<!-- / Custom Fields -->
 			
@@ -1055,7 +1055,7 @@ month['{$this->ipsclass->lang['M_12']}']=\"12\";
 		
 		<!-- My Stuff -->
 		<div class='pp-tabwrap'>
-			".$this->__foreach_loop__id_4b5b50a519750($tabs,$member,$comments,$friends,$visitors,$default_tab,$default_tab_content)."
+			".$this->__foreach_loop__id_4b5da3ace038b($tabs,$member,$comments,$friends,$visitors,$default_tab,$default_tab_content)."
 				<div class='pp-taboff' id='pp-content-tab-comments'>{$this->ipsclass->lang['m_tab_comments']}</div>
 				<div class='pp-taboff' id='pp-content-tab-friends'>{$this->ipsclass->lang['m_tab_friends']}</div>
 				" . (($member['id'] == $this->ipsclass->member['id'] OR ( $this->ipsclass->member['g_is_supmod']==1 AND $member['mgroup'] != $this->ipsclass->vars['admin_group'] )) ? ("
@@ -1081,7 +1081,7 @@ month['{$this->ipsclass->lang['M_12']}']=\"12\";
 			<div class=\"borderwrap\" style='padding:1px'>
 				<div class=\"pp-title\">{$this->ipsclass->lang['m_title_visitors']}</div>
 				" . ((is_array($visitors) and count($visitors)) ? ("
-					".$this->__foreach_loop__id_4b5b50a5197eb($tabs,$member,$comments,$friends,$visitors,$default_tab,$default_tab_content)."
+					".$this->__foreach_loop__id_4b5da3ace0c2e($tabs,$member,$comments,$friends,$visitors,$default_tab,$default_tab_content)."
 				") : ("
 					<div class='post1' style='padding:6px'>
 						<em>{$member['members_display_name']} {$this->ipsclass->lang['m_visitors_none']}.</em>
@@ -1133,7 +1133,7 @@ month['{$this->ipsclass->lang['M_12']}']=\"12\";
 			<div class=\"borderwrap\" style='padding:1px'>
 				<div class=\"pp-title\">{$this->ipsclass->lang['m_title_friends']}</div>
 				" . ((is_array($friends) and count($friends)) ? ("
-					".$this->__foreach_loop__id_4b5b50a519904($tabs,$member,$comments,$friends,$visitors,$default_tab,$default_tab_content)."
+					".$this->__foreach_loop__id_4b5da3ace1027($tabs,$member,$comments,$friends,$visitors,$default_tab,$default_tab_content)."
 					<div class='pp-mini-content-entry-noheight' style='text-align:right'>
 						<a href='#' onclick=\"ips_personal_portal.tab_load( 'friends' )\">{$this->ipsclass->lang['m_view_friends']}</a>
 					</div>
@@ -1225,7 +1225,7 @@ return $IPBHTML;
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a5196c1($tabs=array(),$member=array(),$comments="",$friends=array(),$visitors=array(),$default_tab='posts',$default_tab_content='')
+function __foreach_loop__id_4b5da3acdfa01($tabs=array(),$member=array(),$comments="",$friends=array(),$visitors=array(),$default_tab='posts',$default_tab_content='')
 {
 	$_ips___x_retval = '';
 	
@@ -1244,7 +1244,7 @@ function __foreach_loop__id_4b5b50a5196c1($tabs=array(),$member=array(),$comment
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a519750($tabs=array(),$member=array(),$comments="",$friends=array(),$visitors=array(),$default_tab='posts',$default_tab_content='')
+function __foreach_loop__id_4b5da3ace038b($tabs=array(),$member=array(),$comments="",$friends=array(),$visitors=array(),$default_tab='posts',$default_tab_content='')
 {
 	$_ips___x_retval = '';
 	
@@ -1263,7 +1263,7 @@ function __foreach_loop__id_4b5b50a519750($tabs=array(),$member=array(),$comment
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a5197eb($tabs=array(),$member=array(),$comments="",$friends=array(),$visitors=array(),$default_tab='posts',$default_tab_content='')
+function __foreach_loop__id_4b5da3ace0c2e($tabs=array(),$member=array(),$comments="",$friends=array(),$visitors=array(),$default_tab='posts',$default_tab_content='')
 {
 	$_ips___x_retval = '';
 	
@@ -1290,7 +1290,7 @@ function __foreach_loop__id_4b5b50a5197eb($tabs=array(),$member=array(),$comment
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a519904($tabs=array(),$member=array(),$comments="",$friends=array(),$visitors=array(),$default_tab='posts',$default_tab_content='')
+function __foreach_loop__id_4b5da3ace1027($tabs=array(),$member=array(),$comments="",$friends=array(),$visitors=array(),$default_tab='posts',$default_tab_content='')
 {
 	$_ips___x_retval = '';
 	
@@ -1363,7 +1363,7 @@ function personal_portal_show_comment($comments="",$member=array(),$new_id=0,$re
 $IPBHTML = "";
 //--starthtml--//
 $IPBHTML .= "" . ((is_array($comments) and count($comments)) ? ("
-	".$this->__foreach_loop__id_4b5b50a51ab2e($comments,$member,$new_id,$return_msg)."
+	".$this->__foreach_loop__id_4b5da3ace2e90($comments,$member,$new_id,$return_msg)."
 ") : ("
 	<div class='post1' style='padding:6px'>
 		<em>{$this->ipsclass->lang['m_no_comments']} {$member['members_display_name']}.</em>
@@ -1392,7 +1392,7 @@ return $IPBHTML;
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a51ab2e($comments="",$member=array(),$new_id=0,$return_msg='')
+function __foreach_loop__id_4b5da3ace2e90($comments="",$member=array(),$new_id=0,$return_msg='')
 {
 	$_ips___x_retval = '';
 	
diff --git a/cache/skin_cache/cacheid_2/skin_register.php b/cache/skin_cache/cacheid_2/skin_register.php
index 20807e0..9fd4b7c 100755
--- a/cache/skin_cache/cacheid_2/skin_register.php
+++ b/cache/skin_cache/cacheid_2/skin_register.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
@@ -138,17 +138,17 @@ coppa_check();
 			<form action='{$this->ipsclass->base_url}act=Reg&amp;CODE=coppa_two' method='post'>
 			<select name='m'>
 			 <option value='0'>{$this->ipsclass->lang['select_month']}</option>
-			 ".$this->__foreach_loop__id_4b5b50a51e056($coppadate)."
+			 ".$this->__foreach_loop__id_4b5da3aceb5a0($coppadate)."
 			</select>
 			
 			<select name='d'>
 			 <option value='0'>{$this->ipsclass->lang['select_day']}</option>
-			 ".$this->__foreach_loop__id_4b5b50a51e0c0($coppadate)."
+			 ".$this->__foreach_loop__id_4b5da3aceb60c($coppadate)."
 			</select>
 			
 			<select name='y'>
 			 <option value='0'>{$this->ipsclass->lang['select_year']}</option>
-			 ".$this->__foreach_loop__id_4b5b50a51e13d($coppadate)."
+			 ".$this->__foreach_loop__id_4b5da3aceb694($coppadate)."
 			</select>
 			 <input type='submit' value='{$this->ipsclass->lang['coppa_continue_button']}' />
 			</form>
@@ -166,7 +166,7 @@ return $IPBHTML;
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a51e056($coppadate='')
+function __foreach_loop__id_4b5da3aceb5a0($coppadate='')
 {
 	$_ips___x_retval = '';
 	
@@ -185,7 +185,7 @@ function __foreach_loop__id_4b5b50a51e056($coppadate='')
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a51e0c0($coppadate='')
+function __foreach_loop__id_4b5da3aceb60c($coppadate='')
 {
 	$_ips___x_retval = '';
 	
@@ -204,7 +204,7 @@ function __foreach_loop__id_4b5b50a51e0c0($coppadate='')
 // Foreach loop function
 //===========================================================================
 
-function __foreach_loop__id_4b5b50a51e13d($coppadate='')
+function __foreach_loop__id_4b5da3aceb694($coppadate='')
 {
 	$_ips___x_retval = '';
 	
diff --git a/cache/skin_cache/cacheid_2/skin_search.php b/cache/skin_cache/cacheid_2/skin_search.php
index 6780f78..a91c764 100755
--- a/cache/skin_cache/cacheid_2/skin_search.php
+++ b/cache/skin_cache/cacheid_2/skin_search.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_stats.php b/cache/skin_cache/cacheid_2/skin_stats.php
index 96334fe..03d6dc1 100755
--- a/cache/skin_cache/cacheid_2/skin_stats.php
+++ b/cache/skin_cache/cacheid_2/skin_stats.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:09 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_subscriptions.php b/cache/skin_cache/cacheid_2/skin_subscriptions.php
index 5560fba..e594a39 100755
--- a/cache/skin_cache/cacheid_2/skin_subscriptions.php
+++ b/cache/skin_cache/cacheid_2/skin_subscriptions.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:09 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_topic.php b/cache/skin_cache/cacheid_2/skin_topic.php
index 1035d0f..4d412c7 100755
--- a/cache/skin_cache/cacheid_2/skin_topic.php
+++ b/cache/skin_cache/cacheid_2/skin_topic.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sun, 24 Jan 2010 11:41:18 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 15:03:49 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
@@ -777,7 +777,7 @@ $IPBHTML .= "<!--Begin Msg Number {$post['pid']}-->
 		<td class=\"row2\" valign=\"middle\" width=\"99%\">
 			<!-- POSTED DATE DIV -->
 			<div style=\"float: left;\">
-				<span class=\"postdetails\">{$post['post_icon']} <img src='{$this->ipsclass->vars['img_url']}/to_post_off.gif' alt='{$this->ipsclass->lang['to_post_alt']}' border='0' style='padding-bottom:2px' /> {$post['post_date']}</span>
+				<span class=\"postdetails\">{$post['post_icon']} <img src='{$this->ipsclass->vars['img_url']}/to_post_off.gif' alt='{$this->ipsclass->lang['to_post_alt']}' border='0' style='padding-bottom:2px' /> {$post['post_date']} &middot; <a href=\"{$this->ipsclass->base_url}act=Post&amp;CODE=02&amp;f={$this->ipsclass->input['f']}&amp;t={$this->ipsclass->input['t']}&amp;qpid={$post['pid']}\" onclick=\"return ajax_quick_quote('{$post['pid']}');\">{$this->ipsclass->lang['ajax_quick_quote']}</a></span>
 			</div>
 			<!-- REPORT / DELETE / EDIT / QUOTE DIV -->
 			<div align=\"right\">
@@ -1139,6 +1139,7 @@ var js_no_empty_post = \"{$this->ipsclass->lang['js_no_empty_post']}\";
 //-->
 </script>
 <script type=\"text/javascript\" src=\"jscripts/ipb_topic.js\"></script>
+<script type=\"text/javascript\" src=\"jscripts/sns_ajax_quick_quote.js\"></script>
 <script type=\"text/javascript\" src=\"jscripts/sns_quick_multi_quote.js\"></script>
 <script type=\"text/javascript\" src=\"jscripts/ips_text_editor_lite.js\"></script>
 <script type='text/javascript'>
@@ -1365,7 +1366,7 @@ return $IPBHTML;
 
 /*--------------------------------------------------*/
 /*<changed bits>
-quick_reply_box_open,topic_page_top
+quick_reply_box_open,RenderRow,topic_page_top
 </changed bits>*/
 /* END OF FILE                                      */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_2/skin_ucp.php b/cache/skin_cache/cacheid_2/skin_ucp.php
index 8b6c798..ae1fe09 100755
--- a/cache/skin_cache/cacheid_2/skin_ucp.php
+++ b/cache/skin_cache/cacheid_2/skin_ucp.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:09 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_3/skin_topic.php b/cache/skin_cache/cacheid_3/skin_topic.php
index 84316c5..eecaf6f 100755
--- a/cache/skin_cache/cacheid_3/skin_topic.php
+++ b/cache/skin_cache/cacheid_3/skin_topic.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 3                     */
-/* CACHE FILE: Generated: Sun, 24 Jan 2010 11:41:30 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:55:02 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
@@ -777,7 +777,7 @@ $IPBHTML .= "<!--Begin Msg Number {$post['pid']}-->
 		<td class=\"post_head\" valign=\"middle\" width=\"99%\">
 			<!-- POSTED DATE DIV -->
 			<div style=\"float: left;\">
-				<span class=\"postdetails\">{$post['post_icon']} <img src='{$this->ipsclass->vars['img_url']}/to_post_off.gif' alt='{$this->ipsclass->lang['to_post_alt']}' border='0' style='padding-bottom:2px' /> {$post['post_date']}</span>
+				<span class=\"postdetails\">{$post['post_icon']} <img src='{$this->ipsclass->vars['img_url']}/to_post_off.gif' alt='{$this->ipsclass->lang['to_post_alt']}' border='0' style='padding-bottom:2px' /> {$post['post_date']} &middot; <a href=\"{$this->ipsclass->base_url}act=Post&amp;CODE=02&amp;f={$this->ipsclass->input['f']}&amp;t={$this->ipsclass->input['t']}&amp;qpid={$post['pid']}\" onclick=\"return ajax_quick_quote('{$post['pid']}');\">{$this->ipsclass->lang['ajax_quick_quote']}</a></span>
 			</div>
 			<!-- REPORT / DELETE / EDIT / QUOTE DIV -->
 			<div align=\"right\">
@@ -1139,6 +1139,7 @@ var js_no_empty_post = \"{$this->ipsclass->lang['js_no_empty_post']}\";
 //-->
 </script>
 <script type=\"text/javascript\" src=\"jscripts/ipb_topic.js\"></script>
+<script type=\"text/javascript\" src=\"jscripts/sns_ajax_quick_quote.js\"></script>
 <script type=\"text/javascript\" src=\"jscripts/sns_quick_multi_quote.js\"></script>
 <script type=\"text/javascript\" src=\"jscripts/ips_text_editor_lite.js\"></script>
 <script type='text/javascript'>
diff --git a/jscripts/sns_ajax_quick_quote.js b/jscripts/sns_ajax_quick_quote.js
new file mode 100644
index 0000000..896293b
--- /dev/null
+++ b/jscripts/sns_ajax_quick_quote.js
@@ -0,0 +1,84 @@
+/**
+* (SnS) AJAX Quick Quote
+* for IP.Board 2.1.xвЂ’2.3.x
+*
+* @package		(SnS) AJAX Quick Quote
+* @author		Oleg "Sannis" Efimov
+* @copyright		2007 Sannis
+* @link			http://sannis.ru
+*/
+
+
+function ajax_quick_quote( pid )
+{
+	//----------------------------------
+	// Using fancy js?
+	//----------------------------------
+	
+	if ( !use_enhanced_js )
+	{
+		return false;
+	}
+	
+	/*--------------------------------------------*/
+	// Main function to do on request
+	/*--------------------------------------------*/
+	
+	do_request_function = function()
+	{
+		if ( ! xmlobj.readystate_ready_and_ok() )
+		{
+			xmlobj.show_loading();
+			return;
+		}
+		
+		xmlobj.hide_loading();
+		
+		//----------------------------------
+		// Process
+		//----------------------------------
+		
+		var raw_text = xmlobj.xmlhandler.responseText;
+		
+		if ( raw_text == 'nopermission' )
+		{
+			alert( js_error_no_permission );
+		}
+		else if ( raw_text == 'error' )
+		{
+			alert( 'error' );
+		}
+		else 
+		{
+			ajax_quick_quote_add(raw_text);	
+		}
+	}
+	
+	//----------------------------------
+	// LOAD XML
+	//----------------------------------
+	
+	xmlobj = new ajax_request();
+	xmlobj.onreadystatechange( do_request_function );
+	var url = ipb_var_base_url+'act=xmlout&do=get-post-quickquote&p='+pid+'&t='+ipb_input_t+'&f='+ipb_input_f;
+	xmlobj.process(url);
+	
+	return false;
+}
+
+function ajax_quick_quote_add( raw_text )
+{
+	if ( raw_text.replace(' ', '') != '')
+	{
+		raw_text = ipsclass.un_htmlspecialchars(raw_text);
+		
+		my_show_div(document.getElementById('qr_open'));
+		my_hide_div(document.getElementById('qr_closed'));
+		
+		IPS_Lite_Editor['fast-reply'].editor_check_focus();
+		IPS_Lite_Editor['fast-reply'].insert_text(IPS_Lite_Editor['fast-reply'].get_selection() + raw_text);
+		//IPS_Lite_Editor['fast-reply'].editor_check_focus();
+		
+		document.getElementById('qr_open').scrollIntoView();
+	}
+}
diff --git a/sources/action_admin/skin_template_bits.php b/sources/action_admin/skin_template_bits.php
index 1c585a3..6b57006 100644
--- a/sources/action_admin/skin_template_bits.php
+++ b/sources/action_admin/skin_template_bits.php
@@ -1380,4 +1380,4 @@ class ad_skin_template_bits
 }
 
 
-?>
\ No newline at end of file
+?>
diff --git a/sources/action_public/xmlout.php b/sources/action_public/xmlout.php
index 860c1db..1a21fa2 100644
--- a/sources/action_public/xmlout.php
+++ b/sources/action_public/xmlout.php
@@ -148,6 +148,11 @@ class xmlout
     			$this->post_edit_save();
     			break;
     			
+		// (SnS) AJAX Quick Quote
+		case 'get-post-quickquote':
+	        	$this->get_post_quickquote();
+	        	break;
+    			
 		case 'get-quickmultiquote':
 			$this->get_quickmultiquote();
 			break;
@@ -173,6 +178,141 @@ class xmlout
     	}
     }
 
+	/**
+	* (SnS) AJAX Quick Quote
+	* for IP.Board 2.3.x
+	*
+	* @package		(SnS) AJAX Quick Quote
+	* @author		Oleg "Sannis" Efimov
+	* @copyright		2007	Sannis
+	* @link			http://sannis.ru
+	*/
+	function get_post_quickquote()
+	{
+		//-----------------------------------------
+		// INIT
+		//-----------------------------------------
+
+		$pid = intval( $_GET['p'] );
+		$fid = intval( $_GET['f'] );
+		$tid = intval( $_GET['t'] );
+
+		//-----------------------------------------
+		// Check P|T|FID
+		//-----------------------------------------
+
+		if ( !$pid OR !$tid OR !$fid )
+		{
+			$this->class_ajax->return_string('error');
+		}
+
+		//-----------------------------------------
+		// Get topic
+		//-----------------------------------------
+
+		$topic = $this->ipsclass->DB->build_and_exec_query( array( 'select' => '*', 'from' => "topics", 'where' => 'tid='.$tid ) );
+
+		//-----------------------------------------
+		// Is it legitimate?
+		//-----------------------------------------
+	
+		if ( !$topic['tid'] )
+		{
+		    	$this->class_ajax->return_string('nopermission');
+		}
+		
+		//-----------------------------------------
+		// Got permission?
+		//-----------------------------------------
+
+		if ( ( $topic['state'] != 'open' ) and ( ! $this->ipsclass->member['g_is_supmod'] ) )
+		{
+			if ( $this->ipsclass->member['g_post_closed'] != 1 )
+			{
+				$this->class_ajax->return_string('nopermission');
+			}
+		}
+
+		if ( $this->ipsclass->check_perms( $this->ipsclass->forums->forum_by_id[ $fid ]['reply_perms'] ) == FALSE )
+		{
+		    $this->return_string('nopermission');
+		}
+
+		if ( $this->ipsclass->forums->forum_by_id[ $fid ]['status'] == 0 )
+		{
+			$this->class_ajax->return_string('nopermission');
+		}
+
+		//-----------------------------------------
+		// Get post
+		//-----------------------------------------
+
+		require_once( ROOT_PATH."sources/classes/post/class_post.php" );
+		require_once( ROOT_PATH."sources/classes/post/class_post_edit.php" );
+
+		$post           =  new post_functions();
+		$post->ipsclass =& $this->ipsclass;
+		$post->forum    =  $this->ipsclass->forums->forum_by_id[ $fid ];
+		$post->load_classes();
+		$post->build_permissions();
+		
+		$post->topic =& $topic;
+	
+		//-----------------------------------------
+		// Load the post
+		//-----------------------------------------
+	
+		$this->ipsclass->DB->simple_construct( array( 'select' => '*', 'from' => 'posts', 'where' => 'pid='.$pid ) );
+		$this->ipsclass->DB->simple_exec();
+	
+		$post->orig_post = $this->ipsclass->DB->fetch_row();
+	
+		if ( !$post->orig_post['pid'] )
+		{
+			$this->class_ajax->return_string('nopermission');
+		}
+	
+		//-----------------------------------------
+		// Same topic?
+		//-----------------------------------------
+	
+		if ( $post->orig_post['topic_id'] != $post->topic['tid'] )
+		{
+			$this->class_ajax->return_string('nopermission');
+		}
+
+		//-----------------------------------------
+		// Check
+		//-----------------------------------------
+
+		if ( !$post->orig_post['post'] )
+		{
+			$this->class_ajax->return_string('nopermission');
+		}
+
+		//-----------------------------------------
+		// Convert and return plain text
+		//-----------------------------------------
+
+		$bbtext = $post->parser->pre_edit_parse( $post->orig_post['post'] );
+
+		if ( $this->ipsclass->vars['strip_quotes'] )
+		{
+			$bbtext = trim($post->_recursive_kill_quotes( $bbtext ) );
+		}
+		
+		/*if ( $post->han_editor->method == 'rte' && $post->ipsclass->can_use_fancy_js )
+		{
+			$raw_text = "[quote name='".$post->parser->make_quote_safe($post->orig_post['author_name'])."' date='".$post->parser->make_quote_safe($this->ipsclass->get_date($post->orig_post['post_date'], 'LONG', 1))."' post='{$post->orig_post['pid']}']<br />{$bbtext}<br />[/quote]<br />";
+		}
+		else
+		{*/
+			$raw_text = "[quote name='".$post->parser->make_quote_safe($post->orig_post['author_name'])."' date='".$post->parser->make_quote_safe($this->ipsclass->get_date($post->orig_post['post_date'], 'LONG', 1))."' post='{$post->orig_post['pid']}']\n{$bbtext}\n[/quote]\n";
+		/*}*/
+
+		$this->class_ajax->return_html($raw_text);
+	}
+
 	/*-------------------------------------------------------------------------*/
 	// Save profile settings
 	/*-------------------------------------------------------------------------*/
diff --git a/style_images/css_2.css b/style_images/css_2.css
index 35ed902..b19e253 100755
--- a/style_images/css_2.css
+++ b/style_images/css_2.css
@@ -4,7 +4,7 @@
 /* OR CHANGES TO THIS FILE WILL BE LOST WHEN NEXT EDITED FROM THE   */
 /* ADMIN CONTROL PANEL                                              */
 /* STYLE DIRECTORY: 1                                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:20 GMT */
+/* CACHE FILE: Generated: Mon, 25 Jan 2010 13:59:08 GMT */
 /*------------------------------------------------------------------*/
 
 /*~START CSS~*/
