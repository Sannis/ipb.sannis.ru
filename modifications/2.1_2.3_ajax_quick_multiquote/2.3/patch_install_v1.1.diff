diff --git a/cache/skin_cache/cacheid_2/skin_topic.php b/cache/skin_cache/cacheid_2/skin_topic.php
index bd85c03..1035d0f 100755
--- a/cache/skin_cache/cacheid_2/skin_topic.php
+++ b/cache/skin_cache/cacheid_2/skin_topic.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 2                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:21 GMT */
+/* CACHE FILE: Generated: Sun, 24 Jan 2010 11:41:18 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
@@ -622,7 +622,7 @@ $IPBHTML .= "<div id=\"qr_open\" style=\"display: $show; position: relative;\">
 					<input type=\"checkbox\" name=\"enabletrack\" value=\"1\" class=\"checkbox\" checked=\"checked\" />&nbsp;{$this->ipsclass->lang['qr_add_email']} &#124;
 				")) . "
 				<input type=\"checkbox\" name=\"enableemo\" value=\"yes\" class=\"checkbox\" checked=\"checked\" />&nbsp;{$this->ipsclass->lang['qr_add_smilie']} &#124;
-				<input type=\"checkbox\" name=\"enablesig\" value=\"yes\" class=\"checkbox\" checked=\"checked\" />&nbsp;{$this->ipsclass->lang['qr_add_sig']}
+				<input type=\"checkbox\" name=\"enablesig\" value=\"yes\" class=\"checkbox\" checked=\"checked\" />&nbsp;{$this->ipsclass->lang['qr_add_sig']} &#124; <a href=\"javascript:ajax_quick_multi_quote();\">Цитировать отмеченные</a>
 			</div>
 		    <div style='margin-top:3px'>
 				<input type=\"submit\" name=\"submit\" value=\"{$this->ipsclass->lang['qr_submit']}\" class=\"button\" tabindex=\"2\" accesskey=\"s\" /> &nbsp;
@@ -1139,6 +1139,7 @@ var js_no_empty_post = \"{$this->ipsclass->lang['js_no_empty_post']}\";
 //-->
 </script>
 <script type=\"text/javascript\" src=\"jscripts/ipb_topic.js\"></script>
+<script type=\"text/javascript\" src=\"jscripts/sns_quick_multi_quote.js\"></script>
 <script type=\"text/javascript\" src=\"jscripts/ips_text_editor_lite.js\"></script>
 <script type='text/javascript'>
 //<![CDATA[
@@ -1364,7 +1365,7 @@ return $IPBHTML;
 
 /*--------------------------------------------------*/
 /*<changed bits>
-
+quick_reply_box_open,topic_page_top
 </changed bits>*/
 /* END OF FILE                                      */
 /*--------------------------------------------------*/
diff --git a/cache/skin_cache/cacheid_3/skin_topic.php b/cache/skin_cache/cacheid_3/skin_topic.php
index b7b528a..84316c5 100755
--- a/cache/skin_cache/cacheid_3/skin_topic.php
+++ b/cache/skin_cache/cacheid_3/skin_topic.php
@@ -2,7 +2,7 @@
 /*--------------------------------------------------*/
 /* FILE GENERATED BY INVISION POWER BOARD           */
 /* CACHE FILE: Skin set id: 3                     */
-/* CACHE FILE: Generated: Sat, 23 Jan 2010 19:40:24 GMT */
+/* CACHE FILE: Generated: Sun, 24 Jan 2010 11:41:30 GMT */
 /* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
 /* WRITTEN TO THE DATABASE AUTOMATICALLY            */
 /*--------------------------------------------------*/
@@ -622,7 +622,7 @@ $IPBHTML .= "<div id=\"qr_open\" style=\"display: $show; position: relative;\">
 					<input type=\"checkbox\" name=\"enabletrack\" value=\"1\" class=\"checkbox\" checked=\"checked\" />&nbsp;{$this->ipsclass->lang['qr_add_email']} &#124;
 				")) . "
 				<input type=\"checkbox\" name=\"enableemo\" value=\"yes\" class=\"checkbox\" checked=\"checked\" />&nbsp;{$this->ipsclass->lang['qr_add_smilie']} &#124;
-				<input type=\"checkbox\" name=\"enablesig\" value=\"yes\" class=\"checkbox\" checked=\"checked\" />&nbsp;{$this->ipsclass->lang['qr_add_sig']}
+				<input type=\"checkbox\" name=\"enablesig\" value=\"yes\" class=\"checkbox\" checked=\"checked\" />&nbsp;{$this->ipsclass->lang['qr_add_sig']} &#124; <a href=\"javascript:ajax_quick_multi_quote();\">Цитировать отмеченные</a>
 			</div>
 		    <div style='margin-top:3px'>
 				<input type=\"submit\" name=\"submit\" value=\"{$this->ipsclass->lang['qr_submit']}\" class=\"button\" tabindex=\"2\" accesskey=\"s\" /> &nbsp;
@@ -1139,6 +1139,7 @@ var js_no_empty_post = \"{$this->ipsclass->lang['js_no_empty_post']}\";
 //-->
 </script>
 <script type=\"text/javascript\" src=\"jscripts/ipb_topic.js\"></script>
+<script type=\"text/javascript\" src=\"jscripts/sns_quick_multi_quote.js\"></script>
 <script type=\"text/javascript\" src=\"jscripts/ips_text_editor_lite.js\"></script>
 <script type='text/javascript'>
 //<![CDATA[
@@ -1364,7 +1365,7 @@ return $IPBHTML;
 
 /*--------------------------------------------------*/
 /*<changed bits>
-announcement_show,RenderRow,topic_page_top
+announcement_show,quick_reply_box_open,RenderRow,topic_page_top
 </changed bits>*/
 /* END OF FILE                                      */
 /*--------------------------------------------------*/
diff --git a/jscripts/sns_quick_multi_quote.js b/jscripts/sns_quick_multi_quote.js
new file mode 100644
index 0000000..f10f02b
--- /dev/null
+++ b/jscripts/sns_quick_multi_quote.js
@@ -0,0 +1,73 @@
+/*
++--------------------------------------------------------------------------
+|   (SnS) AJAX Quick MultiQuote
+|   for IP.Board 2.3.x
+|   based on standart multiquote functions
+|   ========================================
+|   (c) 2007вЂ’2010 Sannis
+|   http://sannis.ru
+|   http://forums.ibresource.ru/index.php?showuser=36662
++---------------------------------------------------------------------------
+*/
+
+function ajax_quick_multi_quote()
+{
+	//----------------------------------
+	// Using fancy js?
+	//----------------------------------
+
+	if ( ! use_enhanced_js )
+	{
+		return;
+	}
+
+	/*--------------------------------------------*/
+	// Main function to do on request
+	// Must be defined first!!
+	/*--------------------------------------------*/
+	
+	do_request_function = function()
+	{
+		//----------------------------------
+		// Ignore unless we're ready to go
+		//----------------------------------
+
+		if ( ! xmlobj.readystate_ready_and_ok() )
+		{
+			xmlobj.show_loading();
+			return;
+		}
+
+		xmlobj.hide_loading();
+
+		//----------------------------------
+		// INIT
+		//----------------------------------
+
+		var ajax_return = xmlobj.xmlhandler.responseText;
+
+		if ( ajax_return != 'error' )
+		{
+			if (ajax_return.replace(" ", "") != "")
+			{
+				document.REPLIER.Post.innerHTML += ajax_return;
+				my_show_div(document.getElementById('qr_open'));
+				my_hide_div(document.getElementById('qr_closed'));
+				document.getElementById('qr_open').scrollIntoView();
+				ipsclass.my_setcookie('mqtids', '');
+			}
+		}
+		
+		return;		
+	}
+
+	//----------------------------------
+	// LOAD XML
+	//----------------------------------
+	xmlobj = new ajax_request();
+	xmlobj.onreadystatechange( do_request_function );
+	var url = ipb_var_base_url+'act=xmlout&do=get-quickmultiquote&t='+ipb_input_t+'&f='+ipb_input_f;
+	var xmlreturn = xmlobj.process( url );
+
+	return ;
+}
diff --git a/sources/action_public/xmlout.php b/sources/action_public/xmlout.php
index 3e6a18d..860c1db 100644
--- a/sources/action_public/xmlout.php
+++ b/sources/action_public/xmlout.php
@@ -148,6 +148,10 @@ class xmlout
     			$this->post_edit_save();
     			break;
     			
+		case 'get-quickmultiquote':
+			$this->get_quickmultiquote();
+			break;
+    			
     		case 'topic_rate':
     			$this->save_topic_rate();
     			break;
@@ -1589,6 +1593,98 @@ class xmlout
 		$this->class_ajax->return_html( $html );
     }
     
+	/*-----------------------------------------------------------*/
+	// Quick MultiQuote Mod for 2.3.x by Sannis
+	/*-----------------------------------------------------------*/
+	
+	function get_quickmultiquote()
+	{
+		$fid = intval( $_REQUEST['f'] );
+		$tid = intval( $_REQUEST['t'] );
+
+		//-----------------------------------------
+		// Check T|FID
+		//-----------------------------------------
+
+		if ( !$tid OR !$fid )
+		{
+			$this->return_string("error");
+			exit();
+		}
+
+		//-----------------------------------------
+		// Load and config the post class
+		//-----------------------------------------
+
+		require_once( ROOT_PATH . 'sources/classes/post/class_post.php' );
+
+		$this->class_post             =  new class_post();
+		$this->class_post->ipsclass   =& $this->ipsclass;
+		$this->class_post->forum	  =  $this->ipsclass->forums->forum_by_id[ $fid ];
+		$this->class_post->md5_check  = $this->md5_check;
+		$this->class_post->obj        = $this->obj;
+		$this->class_post->modules    = $this->modules;
+
+		$this->class_post->load_classes();
+		$this->class_post->build_permissions();
+
+		// Start -->
+
+		$raw_post = '';
+
+		if ( !$this->ipsclass->input['qpid'] )
+		{
+			$this->ipsclass->input['qpid'] = $this->ipsclass->my_getcookie('mqtids');
+
+			if ($this->ipsclass->input['qpid'] == ",")
+			{
+				$this->ipsclass->input['qpid'] = "";
+			}
+		}
+
+		$this->ipsclass->input['qpid'] = preg_replace( "/[^,\d]/", "", trim($this->ipsclass->input['qpid']) );
+
+		if ( $this->ipsclass->input['qpid'] )
+		{
+			$this->class_post->quoted_pids = preg_split( '/,/', $this->ipsclass->input['qpid'], -1, PREG_SPLIT_NO_EMPTY );
+			
+			//-----------------------------------------
+			// Get the posts from the DB and ensure we have
+			// suitable read permissions to quote them
+			//-----------------------------------------
+			
+			if ( count($this->class_post->quoted_pids) )
+			{
+				$this->ipsclass->DB->cache_add_query( 'post_get_quoted', array( 'quoted_pids' => $this->class_post->quoted_pids ) );
+				$this->ipsclass->DB->cache_exec_query();
+			
+				while ( $tp = $this->ipsclass->DB->fetch_row() )
+				{
+					if ( $this->ipsclass->check_perms( $this->ipsclass->forums->forum_by_id[ $tp['forum_id'] ]['read_perms']) == TRUE )
+					{
+						$tmp_post = trim( $this->class_post->parser->pre_edit_parse( $tp['post'] ) );
+
+						if ( $this->ipsclass->vars['strip_quotes'] )
+						{
+							$tmp_post = trim($this->class_post->_recursive_kill_quotes( $tmp_post ) );
+						}
+					
+						$extra = "";
+					
+						if ( $tmp_post )
+						{
+							$raw_post .= "[quote name='".$this->class_post->parser->make_quote_safe($tp['author_name'])."' date='".$this->class_post->parser->make_quote_safe($this->ipsclass->get_date( $tp['post_date'], 'LONG', 1 ))."' post='".$tp['pid']."']\n$tmp_post\n".$extra.'[/quote]'."\n";
+						}
+					}
+				}
+			
+				$raw_post = trim($raw_post)."\n";
+			}
+		}
+
+		$this->return_string($raw_post);
+	}
+    
     /*-------------------------------------------------------------------------*/
 	// DST Auto correction
 	/*-------------------------------------------------------------------------*/
@@ -2288,4 +2384,4 @@ class xmlout
         
 }
 
-?>
\ No newline at end of file
+?>
